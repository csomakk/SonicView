<?xml version="1.0"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
                       xmlns:s="library://ns.adobe.com/flex/spark"
                       invoke="onInvoke(event)"
                       showStatusBar="false"
                       keyDown="onKeyDown(event)"
                       doubleClickEnabled="true"
                       doubleClick="onDoubleClick()"
                       backgroundColor="black"
>
    <fx:Script><![CDATA[

        var imageLoader:ImageLoader = new ImageLoader();

        public function onDoubleClick():void {
            toggleFullScreen();
        }

        public function onInvoke(invokeEvent:InvokeEvent):void {
            if ((invokeEvent.currentDirectory != null) && (invokeEvent.arguments.length > 0)){
                imageLoader.loadImage(invokeEvent.arguments[0]);
            }
        }

        private function onKeyDown(event:KeyboardEvent):void {
            if ([Keyboard.ENTER, Keyboard.NUMPAD_ENTER].indexOf(event.keyCode) != -1 ){
                toggleFullScreen();
            }
        }

        private function toggleFullScreen():void {
            if (stage.displayState == StageDisplayState.FULL_SCREEN_INTERACTIVE) {
                stage.displayState = StageDisplayState.NORMAL;
            } else {
                stage.displayState = StageDisplayState.FULL_SCREEN_INTERACTIVE;
            }
        }


        ]]></fx:Script>
    <s:Image
            source="{imageLoader.lastLoadedImageSource}"
            id="image"
            top="0"
            left="0"
            right="0"
            bottom="0"
    />
    <s:Label id="params"
             text="{imageLoader.lastLoadedImagePath}"
             color="green"
             bottom="0"
    />
</s:WindowedApplication>
